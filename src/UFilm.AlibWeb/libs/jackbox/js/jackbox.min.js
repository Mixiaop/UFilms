(function(c){function ub(){J=c(window);ac=c("body");$a=c("body, html");v=c("<div />").addClass("jackbox-modal");w=c("<div />").addClass("jackbox-holder");ia=c("<div />").addClass("jackbox-wrapper");Z=c("<div />").addClass("jackbox-preloader");ja=c("<span />").addClass("jackbox-panel jackbox-panel-left");ta=c("<span />").addClass("jackbox-panel jackbox-panel-right");var a=r.createDocumentFragment();a.appendChild(ia[0]);a.appendChild(Z[0]);v[0].appendChild(a);a=r.createDocumentFragment();a.appendChild(ja[0]); a.appendChild(ta[0]);a.appendChild(w[0]);ia[0].appendChild(a);ka=c("<div />").addClass("jackbox-container");ua||(a=c("<span />").addClass("jackbox-pre-outside").appendTo(Z),c("<span />").addClass("jackbox-pre-inside").appendTo(a));$*=2;Oa=0;a=r.createDocumentFragment();vb&&(B=c(vb).hide(),a.appendChild(B[0]));a.appendChild(ka[0]);wb&&(C=c(wb).hide(),a.appendChild(C[0]));w[0].appendChild(a);xb=-(G+Ea);va=[];Pa=[];K=[];L=[];yb.each(Vc);W&&(c.address.internalChange(zb),c.address.externalChange(Wc)); bc=!0;Qa&&(W?setTimeout(Qa,250):Qa(),Qa=null);yb=Pa=vb=wb=va=null}function cc(a,b){var d=c(this),m=L.length,g=-1,e,l;if(a&&"object"===typeof a){var f,h=d.attr("href");for(l in a)a.hasOwnProperty(l)&&"trigger"!==l&&(f=a[l],"href"===l&&h||d.attr("data-"+l,f),"group"===l&&(e=f))}e||(e=d.attr("data-group"));if(e){for(e=e.split(" ").join("").toLowerCase();m--;)if(L[m]===e){g=m;break}if(-1<g){e=K[g];for(m=e.length;m--;)if(l=e[m],l[0]===d[0]){if(b)if(e.splice(m,1),l.off("click.jackbox"),d=e.length)for(g= 0;g<d;g++)e[g].data("id",g);else K.splice(g,1),L.splice(g,1),Ra--;return}m=e.length;e[m]=d}else{if(b)return;g=L.length;m=K.length;L[g]=e;Ra++;K[m]=[d];m=0}dc(d);d.data({id:m,cat:g});a&&a.trigger&&d.trigger("click")}}function Vc(){var a=c(this).attr("data-group").split(" ").join("").toLowerCase();if(ua){for(var b=L.length,d=!1;b--;)if(L[b]===a){d=!0;break}d||ec(a)}else-1===L.indexOf(a)&&ec(a)}function ec(a){L[L.length]=a;Pa=[];c(fc+"[data-group="+a+"]").each(dc);K[K.length]=Pa;Ra++}function dc(a){isNaN(a)? e=a:(e=c(this).data({id:a,cat:Ra}),Pa[a]=e);if(p=e.attr("href")||e.attr("data-href")){var b;a="#"!==p.charAt(0)?p.toLowerCase().split(".").pop():"inline";b=p;if(b=-1!==b.search("youtube.com")?"youtube":-1!==b.search("vimeo.com")?"vimeo":"mp4"===a?"local":!1)e.data("type",b),e.attr("data-thumbnail")||("vimeo"===b?Xc(e,p):"youtube"===b&&e.attr("data-thumbnail","http://img.youtube.com/vi/"+p.split("http://www.youtube.com/watch?v=")[1]+"/1.jpg"));else if("jpg"===a||"png"===a||"jpeg"===a||"gif"===a)e.data("type", "image");else switch(a){case "mp3":e.data("type","audio");break;case "swf":e.data("type","swf");break;case "inline":e.data("type","inline");break;default:e.data("type","iframe")}e.on("click.jackbox",Yc);if(Q=e.attr("data-description")){if(va)if(a=va.indexOf(Q),-1===a){Q=c(Q);if(!Q.length)return;va[va.length]=Q}else Q=va[a];else if(Q=c(Q),!Q.length)return;e.data("description",Q)}}}function Wc(a){if(gc){gc=!1;var b=r.URL.split("?url=");if(2===b.length){window.location=b[0]+"#/"+b[1];return}}clearTimeout(Sa); hc(a.value);-1!==H?ic?(ic=!1,zb()):Sa=setTimeout(zb,750):aa&&Ab()}function zb(a){"object"===typeof a&&(clearTimeout(Sa),hc(a.value));-1!==H?jc():aa&&Ab()}function hc(a){!M||la||Fa||x[f].removeClass("jb-thumb-active");"/"!==a?(a=a.split("/"),3===a.length?(f=parseInt(a[2],10)-1,isNaN(f)&&(f=0),ma=a[1]):isNaN(a[1])?(f=0,ma=a[1]):(f=parseInt(a[1],10)-1,ma="/")):(ma="/",f=0);if("/"!==ma)for(a=Ra;a--;){if(L[a]===ma){H=a;R=K[H].length;X=1!==R;break}}else H=-1;Fa=!1}function ab(){clearTimeout(kc);kc=setTimeout(na, 100)}function Yc(a){a.stopPropagation();a.preventDefault();a=c(this).data();bb(a.cat,a.id,!0)}function bb(a,b,d){clearTimeout(Sa);if(!d){if(M)for(d=x.length;d--;)x[d].off("click.jackbox");ja.off(".jackbox");ta.off(".jackbox");Ga&&Ha.off("keydown.jackbox");s&&Bb&&h.cjSwipe("unbindSwipe")}W?c.address.value(L[a]+"/"+(b+1)):(!M||la||Fa||x[f].removeClass("jb-thumb-active"),f=b,H=a,R=K[H].length,X=1!==R,jc())}function cb(a){if(a&&(a.stopPropagation(),Ta))return!1;aa&&(M&&!la&&x[f].removeClass("jb-thumb-active"), f<K[H].length-1?f++:f=0,Fa=!0,bb(H,f))}function db(a){if(a&&(a.stopPropagation(),Ta))return!1;aa&&(M&&!la&&x[f].removeClass("jb-thumb-active"),0<f?f--:f=K[H].length-1,Fa=!0,bb(H,f))}function lc(){for(var a=[v[0],ia[0],w[0],ka[0]],b=4;b--;)a[b].removeEventListener("touchstart",D,!1),a[b].removeEventListener("touchmove",D,!1),a[b].removeEventListener("touchend",D,!1)}function jc(){eb=K[H];if(e=eb[f]){if(s)for(var a=[v[0],ia[0],w[0],ka[0]],b=4;b--;)a[b].addEventListener("touchstart",D,!1),a[b].addEventListener("touchmove", D,!1),a[b].addEventListener("touchend",D,!1);p=e.attr("href")||e.attr("data-href");if(aa)Ta=!0,mc(),nc();else{aa=!0;s||$a.stop();Oa=J.scrollTop();v.appendTo(ac).one("click.jackbox",Cb);Ia||(oc=v.parents().each(Zc));if(Ga)Ha.on("keydown.jackbox_keyboard",$c);pc||(pc=!0,fb=parseInt(w.css("padding-left"),10)+parseInt(w.css("padding-right"),10),Ja=parseInt(w.css("padding-top"),10)+parseInt(w.css("padding-bottom"),10),Db=parseInt(ja.css("width"),10)+14,gb=Ja+$,Eb=G+(Ea<<1),hb=parseInt(Z.css("margin-top"), 10),qc=hb-(Eb>>1),rc=parseInt(w.css("padding-left"),10),sc=parseInt(w.css("padding-top"),10),S=c(".jackbox-fullscreen"),S.length||(S=null),wa=!s&&"safari"!==ib&&("webkitRequestFullScreen"in v[0]||"mozFullScreenEnabled"in r));oa=!Fb&&jb&&X?0:xb;I=J.width();N=J.height();w.css({width:I,height:N,marginLeft:-(I>>1)-rc,marginTop:-(N>>1)-sc});Jacked.fadeIn(v[0],{callback:ad});tc=setTimeout(nc,250);ia.on("click.jackbox",uc)}}}function Zc(){c(this).addClass("jackbox-overflow")}function bd(){c(this).removeClass("jackbox-overflow")} function ad(){Ia||J[0].scrollTo(0,0)}function nc(){M&&(x[f].addClass("jb-thumb-active"),la?la=!1:vc(!1,!0));var a;a=e.attr("data-autoplay")?e.attr("data-autoplay"):wc;a="true"===a||!0===a;var b=e.data("description")||null,d=e.attr("data-title")||"",m;kb="true"===e.attr("data-scaleUp");lb=b&&"string"!==typeof b?b.html():!1;O=e.data("type");a="true"===a||!0===a;d?(Gb=d,pa=escape(Gb)):(pa=!1,"undefined"!==typeof E&&(E.data("links")&&E.data("links").off(".jackbox"),E.empty()));s&&(Bb="image"===O,"inline"!== O&&"iframe"!==O&&r.addEventListener("touchmove",D,!1));"image"!==O&&xc();Ua=!1;568<I?Z.css("margin-top",0===oa?qc:hb):Z.css("margin-top",hb);ia.show();Z.addClass("jackbox-spin-preloader");switch(O){case "image":Va=!0;h=c("<img />").addClass("jackbox-content").one("load.jackbox",mb).prependTo(ka);s&&(h[0].addEventListener("touchstart",D,!1),h[0].addEventListener("touchmove",D,!1),h[0].addEventListener("touchend",D,!1));h.attr("src",p);break;case "youtube":s&&(Ua=!0);Ka(cd.split("{url}").join(p.split("watch?v=")[1]).split("{autoplay}").join(a? 1:0));break;case "vimeo":s&&(Ua=!0);Ka(dd.split("{url}").join(p.substring(p.lastIndexOf("/"))).split("{autoplay}").join(a));break;case "local":var b=Hb(),d="true"===e.attr("data-firefoxUsesFlash")?"true":"false",g=e.attr("data-flashHasPriority")?e.attr("data-flashHasPriority"):yc.toString();m="false"===g&&wa&&"firefox"!==ib;b=e.attr("data-poster")?b+e.attr("data-poster"):"false";Ka(Ib+"?video="+p+"&autoplay="+a+"&flashing="+g+"&width="+T+"&height="+U+"&poster="+b+"&firefox="+d,!0);break;case "audio":Hb(); Ka(Jb+"?audio="+p+"&title="+(e.attr("data-audiotitle")?e.attr("data-audiotitle"):pa)+"&autoplay="+a);break;case "swf":Hb();Ka(Kb+"?swf="+p+"&width="+(q.toString()+"&height="+n.toString()));break;case "inline":a=c(p);a=a.length?a.html():"";h=c("<div />").addClass("jackbox-content jackbox-html").html(a).prependTo(ka);h.css("width",q).find("a").on("click",qa);e.attr("data-height",h.outerHeight(!0));xc();mb();break;default:Ka(p,!1,!0)}wa&&(m?S.hide():S.show())}function Hb(){if(-1!==p.search("http"))return""; var a=r.URL.split("#")[0];"/"!==a[a.length-1]&&(a=a.substring(0,a.lastIndexOf("/")+1));p=a+p;return a}function ed(a){switch(a.keyCode){case 39:cb();break;case 37:db();break;case 40:Lb();break;case 38:Lb()}}function $c(a){27===a.keyCode&&Cb(a)}function fd(){F.css("visibility","hidden")}function gd(){u.data("offLeft",u.offset().left)}function zc(){La.css({opacity:0,visibility:"hidden"})}function Ac(a){"object"===typeof a&&a.stopPropagation();y<R-ra&&(y++,Mb(!1,!0))}function Bc(a){"object"===typeof a&& a.stopPropagation();0<y&&(y--,Mb(!1,!0))}function hd(a){a.stopPropagation();a=c(this).parent();a.addClass("jb-thumb-fadein");s||a.addClass("jb-thumb-hover");a.data("id")===f&&a.addClass("jb-thumb-active")}function Cc(a){a.stopPropagation();if(Ta)return!1;a=c(this).data("id");a!==f&&(M&&x[f].removeClass("jb-thumb-active"),f=a,la=!0,bb(H,f))}function id(){Wa?Dc():(J.off(".jackbox"),Wa=!0,r.mozFullScreenEnabled?(r.addEventListener("mozfullscreenchange",nb,!1),v[0].mozRequestFullScreen()):v[0].webkitRequestFullScreen&& (r.addEventListener("webkitfullscreenchange",nb,!1),v[0].webkitRequestFullScreen()))}function nb(){r.webkitIsFullScreen||r.mozFullScreen?na():Dc(!0)}function Nb(a){r.removeEventListener(a.type,Nb,!1);na();J.on("resize.jackbox",ab)}function Dc(a){Wa=!1;r.mozFullScreenEnabled?(r.removeEventListener("mozfullscreenchange",nb,!1),a?(na(),J.on("resize.jackbox",ab)):(r.addEventListener("mozfullscreenchange",Nb,!1),r.mozCancelFullScreen())):v[0].webkitRequestFullScreen&&(r.removeEventListener("webkitfullscreenchange", nb,!1),a?(na(),J.on("resize.jackbox",ab)):(r.addEventListener("webkitfullscreenchange",Nb,!1),r.webkitCancelFullScreen()))}function xc(){Va=!1;T=e.attr("data-width")?parseInt(e.attr("data-width"),10):Ec;U=e.attr("data-height")?parseInt(e.attr("data-height"),10):Fc;kb="true"===e.attr("data-scaleUp");Gc()}function Gc(){ob=T+fb+Db+$;Ob=U+gb;na("true")}function mc(){clearTimeout(tc);Jacked.stopTween(w[0]);J.off(".jackbox");s&&r.removeEventListener("touchmove",D,!1);h&&(Jacked.stopTween(h[0]),h.remove(), h=null);pb&&(pb.remove(),pb=null);B&&(Jacked.stopTween(B[0],!0),B.hide());C&&(Jacked.stopTween(C[0],!0),C.hide());z&&(z.removeClass("jb-info-inactive"),Jacked.stopTween(P[0]),P.empty().hide())}function Cb(a){a.stopPropagation();W?c.address.value(""):Ab()}function Ab(){clearTimeout(Sa);mc();v.unbind(".jackbox");Ga&&Ha.off("keydown.jackbox_keyboard");if(X){Ga&&Ha.off("keydown.jackbox");xa&&xa.off(".jackbox");ya&&ya.off(".jackbox");Xa&&u&&u.off(".jackbox");Jacked.stopTween(ta[0],!0);Jacked.stopTween(ja[0], !0);var a={opacity:0,visibility:"hidden"};ta.off(".jackbox").css(a);ja.off(".jackbox").css(a)}else za&&za.show(),A&&A.show();ia.hide().off(".jackbox");Z.removeClass("jackbox-spin-preloader");"undefined"!==typeof E&&(E.data("links")&&E.data("links").off(".jackbox"),E.empty());wa&&S.off(".jackbox");Aa&&Aa.unbind(".jackbox");z&&z.off(".jackbox");if(M){Jacked.stopTween(ba[0]);for(ba.off(".jackbox").hide();x.length;)a=x[0],Jacked.stopTween(a[0]),a.remove(),x.shift();ca.off(".jackbox").hide();da.off(".jackbox").hide(); s&&u.cjSwipe("unbindSwipe");Jacked.stopTween(V[0]);V.empty().css("margin-left",0);A&&(A.off(".jackbox"),A&&(Y.hide(),ea.show()));M=x=null}Ia||oc.each(bd);Jacked.fadeOut(v[0],{duration:1E3,callback:jd});w.css({marginLeft:kd,marginTop:ld});s&&(lc(),r.removeEventListener("touchmove",D,!1));setTimeout(md,10);F&&(F.css("visibility","hidden"),s&&(F[0].removeEventListener("touchstart",qa,!1),F[0].removeEventListener("touchmove",qa,!1),F[0].removeEventListener("touchend",qa,!1)));e=aa=Wa=la=Pb=qb=Fa=Qb=Ma= null}function md(){0!==Oa&&(Ia||s?$a.scrollTop(Oa):$a.animate({scrollTop:Oa},{duration:300,queue:!1}))}function jd(){v.detach()}function nd(a){a?db():cb()}function D(a){a.preventDefault()}function od(a,b){if(!aa&&"success"===b.toLowerCase()&&a){var d=a.length,m=document.URL;for(m.substring(0,m.lastIndexOf("/"));d--;)c("<img />").attr("src",sa+"/"+a[d].split("../").join(""))}}function Xc(a,b){c.getJSON("http://vimeo.com/api/v2/video/"+b.split("http://vimeo.com/")[1]+".json?callback=?",{format:"json"}, function(b){a.attr("data-thumbnail",b[0].thumbnail_small)})}function pd(){var a=c(this),b=a.next("img"),d=b.attr("src");b.length&&(a=c("<img />").attr({width:b.attr("width"),height:b.attr("height")}).data("parent",a).one("load.jackbox",qd).insertAfter(b),b.remove(),a.attr("src",d))}function qd(){var a=c(this),b=a.data("parent"),d=parseInt(b.css("width"),10)||b.width(),m=parseInt(b.css("height"),10)||b.height(),b=c("<canvas />").addClass("jackbox-canvas-blur").attr({width:d,height:m}).insertBefore(b), m=Date.now(),d=m+1,m=m+2;a.attr("id",d);b.attr("id",m);StackBlurImage(d,m,29)}function rd(){var a=c(this);a.parent().data({tip:a,tipWidth:a.width()-27,tipHeight:a.height()+17}).on("mouseenter.jackbox",sd).on("mouseleave.jackbox",td)}function sd(){var a=c(this),b=a.offset(),d=a.data();d.tipX=b.left;d.tipY=b.top;d.tip.css({opacity:1,visibility:"visible"});a.on("mousemove.jackbox",ud)}function td(){var a=c(this).off("mousemove.jackbox");ua?a.data("tip").css("opacity",0):a.data("tip").css({opacity:0, visibility:"hidden"})}function qa(a){a.stopImmediatePropagation()}function uc(a){c(a.target).is("a")||(a.stopPropagation(),a.preventDefault())}var k={useThumbs:!0,deepLinking:!0,autoPlayVideo:!1,flashVideoFirst:!1,defaultVideoWidth:960,defaultVideoHeight:540,thumbnailWidth:75,thumbnailHeight:50,useThumbTooltips:!0,dynamic:!1,baseName:"jackbox",className:".jackbox",preloadGraphics:!0,showInfoByDefault:!1,thumbsStartHidden:!1,showPageScrollbar:!1,useKeyboardControls:!0,fullscreenScalesContent:!0,defaultShareImage:"jackbox/img/default_share.jpg"}, $=10,Ea=2,Rb="/php/graphics.php",Kb="/modules/jackbox_swf.html",Sb="/img/thumbs/default.jpg",Ib="/modules/jackbox_video.html",Jb="/modules/jackbox_audio.html",Tb="/modules/jackbox_social.php",dd="http://player.vimeo.com/video{url}?title=0&byline=0&portrait=0&autoplay={autoplay}&color=FFFFFF&wmode=transparent",cd="http://www.youtube.com/embed/{url}?autoplay={autoplay}&autohide=1&hd=1&iv_load_policy=3&showinfo=0&showsearch=0&wmode=transparent",vb='<div class="jackbox-top clearfix"><div class="jackbox-social"></div><div class="jackbox-top-icons"><span class="jackbox-fullscreen"><span class="jackbox-button jackbox-fs"></span><span class="jackbox-button jackbox-ns"></span></span><span class="jackbox-button jackbox-button-margin jackbox-close"></span></div><div />', wb='<div class="jackbox-bottom clearfix"><div class="jackbox-controls"><span class="jackbox-button jackbox-arrow-left"></span><span class="jackbox-button jackbox-arrow-right"></span></div><div class="jackbox-title-text"><span class="jb-current"></span><span class="jb-divider">/</span><span class="jb-total"></span><span class="jackbox-title-txt"></span></div><div class="jackbox-bottom-icons"><span class="jackbox-button jackbox-info"></span><span class="jackbox-button-margin jackbox-button-thumbs"><span class="jackbox-button jackbox-hide-thumbs"></span><span class="jackbox-button jackbox-show-thumbs"></span></span></div></div>', kc,C,wa,rc,sc,Ub,Eb,rb,xb,Wa,Vb,Hc,Ja,fb,Ic,F,Db,Wb,V,u,Xb,da,B,P,fa,Y,ea,ta,S,Oa,ja,pa,ca,ka,Z,ra,va,Yb,Gb,Bb,fc,sa,Ma,La,oa,A,Aa,lb,za,Jc,Xa,Kc,Ba,Na,y,ia,Ca,ya,X,hb,xa,kb,Lc,s,gb,sb,Ya,v,E,e,Pa,z,Ha,r,p,q,J,R,Mc,L,n,ma,K,ua,Da,Zb,tc,Qa,x,ac,w,yb,T,tb,Sa,Nc,h,U,Va,I,N,ob,Ob,O,oc,ib,ga,Q,aa,pc,$a,Ga,Ua,jb,Ta,la,M,ld,Pb,eb,Ia,W,Za,pb,ba,qb,qc,kd,Oc,Fa,$b,Qb,wc,ha,bc,G,yc,Pc,Qc,Fb,Ec,Fc,f=1,H=-1,Ra=0,ic=!0,gc=!0,Rc={init:function(a,b){Oc||"undefined"===typeof Jacked||(b&&c.extend(k,b),fc=k.className, jb=k.useThumbs,W=k.deepLinking,Xa=k.useThumbTooltips,wc=k.autoPlayVideo,Ga=k.useKeyboardControls,Ia=k.showPageScrollbar,ha=k.thumbnailWidth,Nc=k.fullscreenScalesContent,G=k.thumbnailHeight,yc=k.flashVideoFirst,Qc=k.showInfoByDefault,Fb=k.thumbsStartHidden,Pc=k.defaultShareImage,Ec=k.defaultVideoWidth,Fc=k.defaultVideoHeight,sa=k.baseName,Kb=sa+Kb,Ib=sa+Ib,Jb=sa+Jb,Rb=sa+Rb,Sb=sa+Sb,Tb=sa+Tb,r=document,Ha=c(document),Oc=!0,ga=ha+Ea,tb=-1!==r.URL.search("file:///"),Jacked.setEngines({ios:!0,safari:!0, opera:!0,firefox:!0}),k.preloadGraphics&&!tb&&c.getJSON(Rb+"?jackbox_path=../img/graphics/",od),yb=a,ua=Jacked.getIE(),s=Jacked.getMobile(),ib=Jacked.getBrowser(),Mc="ie"===ib,s&&(Ia=!1),"undefined"!==typeof c.address&&W?Mc||k.dynamic?(ub(),c.address.update()):c.address.init(ub):(W=!1,ub()),"undefined"===typeof StackBlurImage||tb||ua||c(".jackbox-hover-blur").each(pd),c(".jackbox-tooltip").each(rd),k=null)},frameReady:function(){aa&&mb()},newItem:function(a,b){a.each(cc,[b])},removeItem:function(a){a.each(cc, [!1,!0])}},Ka=function(){var a={type:"text/html",frameborder:0,mozallowfullscreen:"mozallowfullscreen",webkitallowfullscreen:"webkitallowfullscreen",allowfullscreen:"allowfullscreen"};return function(b,d,m){a.width=q;a.height=n;a.scrolling=m?"auto":"no";h=c("<iframe />").attr(a);Ua?h.addClass("jackbox-youtube"):h.addClass("jackbox-content");h.prependTo(ka);if(!d)h.one("load.jackbox",mb);h.attr("src",b)}}(),mb=function(){var a={};return function(b){b&&b.stopPropagation();Va&&(T=this.width||h.width(), U=this.height||h.height(),Gc());a.width=q;a.height=n;h.css(a);Sc(!0);Vb&&Vb();J.on("resize.jackbox",ab)}}(),Sc=function(){var a={},b={},d={};return function(c){if(c){260>q&&(Da+=260-q);c=Math.max(q,260);if(c===Ma&&n===Yb){Tc();return}a.callback=Tc;a.duration=Ma?50<Math.abs(c-Ma)||50<Math.abs(n-Yb)?600:300:600}else c=q,d.width=c,a.duration=300,delete a.callback,B&&Jacked.tween(B[0],d,a),C&&Jacked.tween(C[0],d,a),d.height=n,Jacked.stopTween(h[0],!0),Jacked.tween(h[0],d,a);b.marginLeft=-((Da>>1)+0.5| 0);b.marginTop=-((Zb>>1)+0.5|0);b.height=n;b.width=c;Ma||(b.opacity=1);Jacked.tween(w[0],b,a);Ma=c;Yb=n}}(),Tc=function(){var a={},b={opacity:1,visibility:"visible"};return function(){vd();Z.removeClass("jackbox-spin-preloader");var d=Math.max(q,260);a.duration=600;Va&&!ua?Jacked.fadeIn(h[0],a):(Ua?h.css("visibility","visible"):h.show(),"audio"!==O&&"local"!==O||h[0].contentWindow.cjInit());a.duration=300;ua?(B&&B.css("width",d).show(),C&&C.css("width",d).show()):(B&&(B.css("width",d),Jacked.fadeIn(B[0], a)),C&&(C.css("width",d),Jacked.fadeIn(C[0],a)));z&&lb?(z.show(),P.html(lb).show(),fa=-P.outerHeight(),F.css("height",-fa<n?-fa:n),Qc?(Na=!0,z.addClass("jb-info-inactive"),P.css({visibility:"visible",marginTop:0})):(Na=!1,P.css("margin-top",fa))):z&&(z.hide(),P.hide());Ta=!1;!qb&&X&&(ja.css(b),ta.css(b));if(!Qb&&jb&&X){var d=K[H],e=[],g=R,f,l,k,t,p;for(Qb=!0;g--;)k=d[g],k.attr("data-thumbnail")?e[g]=!1:(f=k.children("img"),f.length?(k.attr("data-thumbnail",f.attr("src")),e[g]=f):("image"===k.data("type")? k.attr("data-thumbnail",k.attr("href")||k.attr("data-href")):k.attr("data-thumbnail",Sb),e[g]=!1));x=[];ba||(g=r.createDocumentFragment(),k=G>>1,ba=c("<div />").addClass("jackbox-thumb-holder").css("height",G).appendTo(v),u=c("<div />").addClass("jackbox-thumb-panel").css("height",G),da=c("<div />").addClass("jackbox-thumb-right"),ca=c("<div />").addClass("jackbox-thumb-left"),g.appendChild(u[0]),g.appendChild(da[0]),g.appendChild(ca[0]),u[0].cjThumbs=!0,ba[0].appendChild(g),V=c("<div />").addClass("jackbox-thumb-strip").appendTo(u), ca.css("top",k),da.css("top",k));k=r.createDocumentFragment();for(g=0;g<R;g++){l=x[g]=c("<div />").data("id",g).addClass("jackbox-thumb").css({width:ha,height:G,left:ga*g}).on("click.jackbox",Cc);if(Xa&&(f=eb[g].attr("data-thumbTooltip")||eb[g].attr("data-title")))l.data("theTitle",f).on("mouseenter.jackbox",wd).on("mouseleave.jackbox",zc);k.appendChild(l[0]);f=c("<img />").addClass("jb-thumb").one("load.jackbox",hd).appendTo(l);l.data("theThumb",f);e[g]?(l=e[g].attr("width")||e[g].width(),t=e[g].attr("height")|| e[g].height()):(l=ha,t=G);l>ha&&t>G&&(p=l>t?ha/l:G/t,l*=p,t*=p,t<G&&(p=(G-t)/G,l+=l*p,t+=t*p),l<ha&&(p=(ha-l)/ha,l+=l*p,t+=t*p),l!==(l|0)&&(l=l+1|0),t!==(t|0)&&(t=t+1|0));f.attr({width:l,height:t,src:d[g].attr("data-thumbnail")})}V[0].appendChild(k);Ic=x.length;Xb=ga*g;M=!0;y=0;ba.on("click.jackbox",uc).show();Uc();A&&(Fb?(ea.hide(),Y.show(),ba.css("bottom",oa)):(Y.hide(),ea.show(),ba.css("bottom",0)),A.on("click.jackbox",Lb))}if(!qb){qb=!0;if(wa)S.on("click.jackbox",id);if(Aa)Aa.one("click.jackbox", Cb);if(z)z.on("click.jackbox",xd);if(X){if(ya)ya.on("click.jackbox",cb);if(xa)xa.on("click.jackbox",db);if(Xa&&u)u.on("mouseenter.jackbox",gd);s&&F&&(F[0].addEventListener("touchstart",qa,!1),F[0].addEventListener("touchmove",qa,!1),F[0].addEventListener("touchend",qa,!1))}}s&&(h[0].removeEventListener("touchstart",D,!1),h[0].removeEventListener("touchmove",D,!1),h[0].removeEventListener("touchend",D,!1),lc());if(X){if(M)for(d=x.length;d--;)x[d].on("click.jackbox",Cc);ja.on("click.jackbox",db);ta.on("click.jackbox", cb);if(Ga)Ha.on("keydown.jackbox",ed);s&&Bb&&h.cjSwipe("touchSwipe",nd)}"inline"===O&&na()}}(),vd=function(){var a={type:"text/html",frameborder:0,mozallowfullscreen:"mozallowfullscreen",webkitallowfullscreen:"webkitallowfullscreen",allowfullscreen:"allowfullscreen",scrolling:"no"};return function(){Jc||(Jc=!0,Ya=c(".jb-total"),z=c(".jackbox-info"),Ba=c(".jb-divider"),Ca=c(".jb-current"),Aa=c(".jackbox-close"),sb=c(".jackbox-title-text"),E=c(".jackbox-title-txt"),za=c(".jackbox-controls"),xa=c(".jackbox-arrow-left"), Za=c(".jackbox-social"),ya=c(".jackbox-arrow-right"),A=c(".jackbox-button-thumbs"),Y=c(".jackbox-show-thumbs"),ea=c(".jackbox-hide-thumbs"),E.length||(E=null),sb.length||(sb=null),xa.length||(xa=null),Ba.length||(Ba=null),ya.length||(ya=null),za.length||(za=null),Aa.length||(Aa=null),Za.length||(Za=null),Ca.length&&Ya.length||(Ca=null),wa?(c(".jackbox-ns").hide(),S.length||(S=wa=null)):S&&S.hide(),jb?A.length&&Y.length&&ea.length?Y.hide():A=Y=ea=null:(A.hide(),A=Y=ea=null),z.length?(F=c("<div />").addClass("jackbox-info-text").appendTo(ka).css("visibility", "hidden"),P=c("<div />").addClass("jackbox-description-text").appendTo(F)):z=null,Xa&&(La=c("<span />").addClass("jackbox-thumb-tip").css("bottom",G),Ub=c("<span />").addClass("jackbox-thumb-tip-text").text("render me").appendTo(La),La.appendTo(v),Hc=(parseInt(La.css("padding-left"),10)<<1)-(Ea<<1)));X||(za&&za.hide(),A&&A.hide());if(sb){"false"===pa&&(pa=!1);var b=E&&pa,d=b?" -&nbsp;":"";Ca&&X?(Ca.text(f+1).show(),Ya.html(R+d).show(),Ba&&Ba.show()):(Ya&&Ya.hide(),Ca&&Ca.hide(),Ba&&Ba.hide());b&& (E.html(Gb),b=E.find("a"),b.length&&(b.on("click.jackbox",qa),E.data("links",b)))}if(Za&&!tb){var m,b=r.URL.split("#")[0],d=b.length-1;-1!==b.search("/")&&("/"!==b.charAt(d)?(W?m=b+"#/"+ma+"/"+(f+1):m=b,b=b.substring(0,b.lastIndexOf("/"))):(b=b.substring(0,d),W?m=b+"/#/"+ma+"/"+(f+1):m=b));Va?d=e.attr("href")||e.attr("data-href"):(d=e.children("img"),d=d.length?d.attr("src"):Pc);-1===d.search("http")&&(d="/"!==d.charAt(0)?b+"/"+d:b+d);b=pa?pa.replace(/(<([^>]+)>)/ig,""):r.title;b=b.split(".").join(""); a.width=200;a.height=21;a.src=Tb+"?url="+encodeURIComponent(m)+"&poster="+encodeURIComponent(d)+"&title="+escape(b);pb=c("<iframe />").attr(a).appendTo(Za)}}}(),xd=function(){var a={},b={duration:300};return function(d){d&&d.stopPropagation();Na?(a.marginTop=fa,b.callback=fd,z.removeClass("jb-info-inactive")):(z.addClass("jb-info-inactive"),F.css("visibility","visible"),a.marginTop=0,delete b.callback);Jacked.tween(P[0],a,b);Na=!Na}}(),wd=function(){var a={opacity:1,visibility:"visible"};return function(){s&& (clearTimeout(Lc),Lc=setTimeout(zc,2E3));var b=c(this),d,e,g;Ub.text(b.data("theTitle"));d=parseInt(Ub.css("width"),10);g=u.data("offLeft");b=b.offset().left;e=g+u.width()-d-Hc;a.width=d;a.left=b<g?g:b>e?e:b;La.css(a)}}(),Lb=function(){var a={},b={duration:300};return function(d){d&&d.stopPropagation();0===oa?(oa=xb,A&&(ea.hide(),Y.show())):(oa=0,A&&(Y.hide(),ea.show()));a.bottom=oa;Jacked.tween(ba[0],a,b);569>I||(na("true"),Sc())}}(),Uc=function(){var a={};return function(b){var d=I-160;Xb<d?(ra= Ic,$b=!1):(ra=d/ga|0,$b=!0);rb=ga*ra-Ea;Wb=ra-1;a.marginLeft=-(rb>>1)-Ea;a.width=rb;u.css(a);V.css("width",Xb);vc(b)}}(),vc=function(){var a={},b={duration:300};return function(d,c){if(d)y=f,0!==f&&f+ra>R&&(y=R-ra),Jacked.stopTween(V[0]),V.css("left",y*-ga);else{if(0===f)y=0;else if(f>y+Wb)for(;f>y+Wb;)y++;c?(a.left=y*-ga,Jacked.tween(V[0],a,b)):(Jacked.stopTween(V[0]),V.css("left",y*-ga))}Mb(d,!1)}}(),Mb=function(){var a={},b={duration:300};return function(d,c){ca.off(".jackbox");da.off(".jackbox"); if($b)if(s&&u.cjSwipe("unbindSwipe"),y<R-ra?(da.on("click.jackbox",Ac).show(),s&&u.cjSwipe("touchSwipeLeft",Ac,!0)):da.hide(),0<y?(ca.on("click.jackbox",Bc).show(),s&&u.cjSwipe("touchSwipeRight",Bc,!0)):ca.hide(),c)a.left=y*-ga,Jacked.tween(V[0],a,b);else{if(d||!Pb){var e=u.offset().left;ca.css("left",e);da.css("left",e+rb);Pb=!0}}else ca.hide(),da.hide()}}(),na=function(){var a={opacity:1},b={};return function(d){I=J.width();N=Math.max(J.height(),226);var c=568<I&&0===oa?Eb:0;Kc="audio"!==O&&"inline"!== O?Wa?kb||Nc:kb:!1;if(ob<I&&Ob+c<N&&!Kc)q=T,n=U;else{q=I/ob;n=N/Ob;var e=q>n?n:q;q=T*e;n=U*e;I>N?n+gb+c>N&&(n=N-Ja-$-c,q=n/U*T):q>n?q+ob>I&&(q=I-$,n=q/T*U):n+gb+c>N&&(n=N-Ja-$-c,q=n/U*T);q!==(q|0)&&(q=q+1|0);n!==(n|0)&&(n=n+1|0)}if("inline"===O){var e=I-fb-Db-$,f=N-Ja-$-c;q=T>e?e:T;n=U<f?U:n}Da=q+fb;Zb=n+Ja+c;"true"!==d&&(Jacked.stopTween(w[0],!1,!0),h&&Jacked.stopTween(h[0],!0,!0),260>q&&(Da+=260-q),d=Math.max(260,q),a.width=d,a.height=n,b.marginLeft=-(0.5*Da+0.5|0),b.marginTop=-(0.5*Zb+0.5|0),b.width= d,b.height=n,w.css(b),h.css(a),C&&(Jacked.stopTween(C[0]),C.css("width",d)),B&&(Jacked.stopTween(B[0]),B.css("width",d)),z&&lb&&(fa=-P.outerHeight(),F.css("height",-fa<n?-fa:n),Na||(Jacked.stopTween(P[0],!1,!0),P.css("margin-top",fa))),M&&Uc(!0))}}(),ud=function(){var a={};return function(b){var d=c(this).data();a.left=b.pageX-d.tipX-d.tipWidth;a.top=b.pageY-d.tipY-d.tipHeight;d.tip.css(a)}}();c.fn.jackBox=function(a,b){if(Rc.hasOwnProperty(a))Rc[a](this,b);return this};c.jackBox={available:function(a){a&& (bc?W?setTimeout(a,250):a():Qa=a)},itemLoaded:function(a){Vb=a}}})(jQuery);function jackboxFrameReady(){jQuery.fn.jackBox("frameReady")};